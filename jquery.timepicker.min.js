(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function o(e){e.minTime&&(e.minTime=S(e.minTime)),e.maxTime&&(e.maxTime=S(e.maxTime)),e.durationTime&&typeof e.durationTime!="function"&&(e.durationTime=S(e.durationTime));if(e.disableTimeRanges.length>0){for(var t in e.disableTimeRanges)e.disableTimeRanges[t]=[S(e.disableTimeRanges[t][0]),S(e.disableTimeRanges[t][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,t){return e[0]-t[0]})}return e}function u(t){var r=t.data("timepicker-settings"),i=t.data("timepicker-list");i&&i.length&&(i.remove(),t.data("timepicker-list",!1)),i=e("<ul />",{"class":"ui-timepicker-list"});var o=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});o.css({display:"none",position:"absolute"}).append(i),r.className&&o.addClass(r.className),(r.minTime!==null||r.durationTime!==null)&&r.showDuration&&o.addClass("ui-timepicker-with-duration");var u=r.minTime;typeof r.durationTime=="function"?u=S(r.durationTime()):r.durationTime!==null&&(u=r.durationTime);var a=r.minTime!==null?r.minTime:0,f=r.maxTime!==null?r.maxTime:a+n-1;f<=a&&(f+=n);var l=r.disableTimeRanges,c=0,p=l.length;for(var d=a;d<=f;d+=r.step*60){var v=d%n,m=e("<li />");m.data("time",v),m.text(E(v,r.timeFormat));if((r.minTime!==null||r.durationTime!==null)&&r.showDuration){var g=e("<span />");g.addClass("ui-timepicker-duration"),g.text(" ("+w(d-u)+")"),m.append(g)}c<p&&(v>=l[c][0]&&v<l[c][1]?m.addClass("ui-timepicker-disabled"):v>=l[c][1]&&(c+=1)),i.append(m)}o.data("timepicker-input",t),t.data("timepicker-list",o);var y=r.appendTo;typeof y=="string"?y=e(y):typeof y=="function"&&(y=y(t)),y.append(o),h(t,i),i.on("click","li",function(n){t.off("focus.timepicker"),t.on("focus.timepicker-ie-hack",function(){t.off("focus.timepicker-ie-hack"),t.on("focus.timepicker",s.show)}),t[0].focus(),i.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),b(t)&&o.hide()})}function a(){return new Date(1970,1,1,0,0,0)}function f(t){"ontouchstart"in document?e("body").on("touchstart.ui-timepicker",l):(e("body").on("mousedown.ui-timepicker",l),t.closeOnWindowScroll&&e(window).on("scroll.ui-timepicker",l))}function l(t){var n=e(t.target),r=n.closest(".ui-timepicker-input");r.length===0&&n.closest(".ui-timepicker-wrapper").length===0&&(s.hide(),e("body").unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}function c(t,n,r){if(!r&&r!==0)return!1;var i=t.data("timepicker-settings"),s=!1,o=i.step*30;return n.find("li").each(function(t,n){var i=e(n),u=i.data("time")-r;if(Math.abs(u)<o||u==o)return s=i,!1}),s}function h(e,t){t.find("li").removeClass("ui-timepicker-selected");var n=S(d(e));if(!n)return;var r=c(e,t,n);if(r){var i=r.offset().top-t.offset().top;(i+r.outerHeight()>t.outerHeight()||i<0)&&t.scrollTop(t.scrollTop()+r.position().top-r.outerHeight()),r.addClass("ui-timepicker-selected")}}function p(){if(this.value==="")return;var t=e(this),n=S(this.value);if(n===null){t.trigger("timeFormatError");return}var r=t.data("timepicker-settings");r.minTime!==null&&n<r.minTime?t.trigger("timeRangeError"):r.maxTime!==null&&n>r.maxTime&&t.trigger("timeRangeError"),e.each(r.disableTimeRanges,function(){if(n>=this[0]&&n<this[1])return t.trigger("timeRangeError"),!1});if(r.forceRoundTime){var i=n%(r.step*60);i>=r.step*30?n+=r.step*60-i:n-=i}var s=E(n,r.timeFormat);v(t,s)}function d(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function v(e,t){e.is("input")?e.val(t):e.data("ui-timepicker-value",t)}function m(t){var n=e(this),r=n.data("timepicker-list");if(!r||!r.is(":visible")){if(t.keyCode!=40)return g(t,n);n.focus()}switch(t.keyCode){case 13:return b(n)&&s.hide.apply(this),t.preventDefault(),!1;case 38:var i=r.find(".ui-timepicker-selected");return i.length?i.is(":first-child")||(i.removeClass("ui-timepicker-selected"),i.prev().addClass("ui-timepicker-selected"),i.prev().position().top<i.outerHeight()&&r.scrollTop(r.scrollTop()-i.outerHeight())):(r.find("li").each(function(t,n){if(e(n).position().top>0)return i=e(n),!1}),i.addClass("ui-timepicker-selected")),!1;case 40:return i=r.find(".ui-timepicker-selected"),i.length===0?(r.find("li").each(function(t,n){if(e(n).position().top>0)return i=e(n),!1}),i.addClass("ui-timepicker-selected")):i.is(":last-child")||(i.removeClass("ui-timepicker-selected"),i.next().addClass("ui-timepicker-selected"),i.next().position().top+2*i.outerHeight()>r.outerHeight()&&r.scrollTop(r.scrollTop()+i.outerHeight())),!1;case 27:r.find("li").removeClass("ui-timepicker-selected"),r.hide();break;case 9:s.hide();break;default:return g(t,n)}}function g(e,t){return!t.data("timepicker-settings").disableTextInput||e.ctrlKey||e.altKey||e.metaKey||e.keyCode!=2&&(e.keyCode<46||e.keyCode>90)}function y(t){var n=e(this),r=n.data("timepicker-list");if(!r||!r.is(":visible"))return!0;switch(t.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:h(n,r);break;default:return}}function b(e){var t=e.data("timepicker-settings"),n=e.data("timepicker-list"),r=null,i=n.find(".ui-timepicker-selected");if(i.hasClass("ui-timepicker-disabled"))return!1;i.length?r=i.data("time"):d(e)&&(r=S(d(e)),h(e,n));if(r!==null){var s=E(r,t.timeFormat);v(e,s)}return e.trigger("change").trigger("changeTime"),!0}function w(e){var t=Math.round(e/60),n;if(Math.abs(t)<60)n=[t,i.mins];else if(t==60)n=["1",i.hr];else{var r=(t/60).toFixed(1);i.decimal!="."&&(r=r.replace(".",i.decimal)),n=[r,i.hrs]}return n.join(" ")}function E(e,n){if(e===null)return;var r=new Date(t.valueOf()+e*1e3),i="",s,o;for(var u=0;u<n.length;u++){o=n.charAt(u);switch(o){case"a":i+=r.getHours()>11?"pm":"am";break;case"A":i+=r.getHours()>11?"PM":"AM";break;case"g":s=r.getHours()%12,i+=s===0?"12":s;break;case"G":i+=r.getHours();break;case"h":s=r.getHours()%12,s!==0&&s<10&&(s="0"+s),i+=s===0?"12":s;break;case"H":s=r.getHours(),i+=s>9?s:"0"+s;break;case"i":var a=r.getMinutes();i+=a>9?a:"0"+a;break;case"s":e=r.getSeconds(),i+=e>9?e:"0"+e;break;default:i+=o}}return i}function S(e){if(e==="")return null;if(!e||e+0==e)return e;typeof e=="object"&&(e=e.getHours()+":"+x(e.getMinutes())+":"+x(e.getSeconds())),e=e.toLowerCase();var t=new Date(0),n;e.indexOf(":")===-1?(n=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/),n||(n=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))):n=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/);if(!n)return null;var r=parseInt(n[1]*1,10),i;n[4]?r==12?i=n[4]=="p"?12:0:i=r+(n[4]=="p"?12:0):i=r;var s=n[2]*1||0,o=n[3]*1||0;return i*3600+s*60+o}function x(e){return("0"+e).slice(-2)}var t=a(),n=86400,r={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!0,forceRoundTime:!1,appendTo:"body",disableTimeRanges:[],closeOnWindowScroll:!1,disableTextInput:!1},i={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},s={init:function(t){return this.each(function(){var n=e(this);if(n[0].tagName=="SELECT"){var u={type:"text",value:n.val()},a=n[0].attributes;for(var f=0;f<a.length;f++)u[a[f].nodeName]=a[f].nodeValue;var l=e("<input />",u);n.replaceWith(l),n=l}var c=e.extend({},r);t&&(c=e.extend(c,t)),c.lang&&(i=e.extend(i,c.lang)),c=o(c),n.data("timepicker-settings",c),n.prop("autocomplete","off"),n.on("click.timepicker focus.timepicker",s.show),n.on("blur.timepicker",p),n.on("keydown.timepicker",m),n.on("keyup.timepicker",y),n.addClass("ui-timepicker-input"),p.call(n.get(0))})},show:function(t){var n=e(this),r=n.data("timepicker-settings");"ontouchstart"in document&&r.disableTouchKeyboard&&n.blur();var i=n.data("timepicker-list");if(n.prop("readonly"))return;if(!i||i.length===0||typeof r.durationTime=="function")u(n),i=n.data("timepicker-list");if(i.is(":visible"))return;s.hide(),i.show(),n.offset().top+n.outerHeight(!0)+i.outerHeight()>e(window).height()+e(window).scrollTop()?i.offset({left:n.offset().left+parseInt(i.css("marginLeft").replace("px",""),10),top:n.offset().top-i.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10)}):i.offset({left:n.offset().left+parseInt(i.css("marginLeft").replace("px",""),10),top:n.offset().top+n.outerHeight()+parseInt(i.css("marginTop").replace("px",""),10)});var o=i.find(".ui-timepicker-selected");o.length||(d(n)?o=c(n,i,S(d(n))):r.scrollDefaultNow?o=c(n,i,S(new Date)):r.scrollDefaultTime!==!1&&(o=c(n,i,S(r.scrollDefaultTime))));if(o&&o.length){var a=i.scrollTop()+o.position().top-o.outerHeight();i.scrollTop(a)}else i.scrollTop(0);f(r),n.trigger("showTimepicker")},hide:function(t){e(".ui-timepicker-wrapper:visible").each(function(){var t=e(this),n=t.data("timepicker-input"),r=n.data("timepicker-settings");r&&r.selectOnBlur&&b(n),t.hide(),n.trigger("hideTimepicker")})},option:function(t,n){var r=this,i=r.data("timepicker-settings"),s=r.data("timepicker-list");if(typeof t=="object")i=e.extend(i,t);else if(typeof t=="string"&&typeof n!="undefined")i[t]=n;else if(typeof t=="string")return i[t];return i=o(i),r.data("timepicker-settings",i),s&&(s.remove(),r.data("timepicker-list",!1)),r},getSecondsFromMidnight:function(){return S(d(this))},getTime:function(){var e=this,t=new Date;return t.setHours(0,0,0,0),new Date(t.valueOf()+S(d(e))*1e3)},setTime:function(e){var t=this,n=E(S(e),t.data("timepicker-settings").timeFormat);v(t,n)},remove:function(){var e=this;if(!e.hasClass("ui-timepicker-input"))return;e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list")}};e.fn.timepicker=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return s.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.timepicker")}});