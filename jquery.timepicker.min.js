(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(h){var n=c();var k=86400;var s={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:false,timeFormat:"g:ia",scrollDefaultNow:false,scrollDefaultTime:false,selectOnBlur:false,disableTouchKeyboard:true,forceRoundTime:false,appendTo:"body",disableTimeRanges:[],closeOnWindowScroll:false,disableTextInput:false};var q={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"};var u={init:function(y){return this.each(function(){var B=h(this);if(B[0].tagName=="SELECT"){var C={type:"text",value:B.val()};var z=B[0].attributes;for(var D=0;D<z.length;D++){C[z[D].nodeName]=z[D].nodeValue}var A=h("<input />",C);B.replaceWith(A);B=A}var E=h.extend({},s);if(y){E=h.extend(E,y)}if(E.lang){q=h.extend(q,E.lang)}E=g(E);B.data("timepicker-settings",E);B.prop("autocomplete","off");B.on("click.timepicker focus.timepicker",u.show);B.on("blur.timepicker",f);B.on("keydown.timepicker",i);B.on("keyup.timepicker",x);B.addClass("ui-timepicker-input");f.call(B.get(0))})},show:function(D){var y=h(this);var B=y.data("timepicker-settings");if("ontouchstart" in document&&B.disableTouchKeyboard){y.blur()}var C=y.data("timepicker-list");if(y.prop("readonly")){return}if(!C||C.length===0){j(y);C=y.data("timepicker-list")}if(C.is(":visible")){return}u.hide();C.show();if((y.offset().top+y.outerHeight(true)+C.outerHeight())>h(window).height()+h(window).scrollTop()){C.offset({left:y.offset().left+parseInt(C.css("marginLeft").replace("px",""),10),top:y.offset().top-C.outerHeight()+parseInt(C.css("marginTop").replace("px",""),10)})}else{C.offset({left:y.offset().left+parseInt(C.css("marginLeft").replace("px",""),10),top:y.offset().top+y.outerHeight()+parseInt(C.css("marginTop").replace("px",""),10)})}var A=C.find(".ui-timepicker-selected");if(!A.length){if(a(y)){A=e(y,C,p(a(y)))}else{if(B.scrollDefaultNow){A=e(y,C,p(new Date()))}else{if(B.scrollDefaultTime!==false){A=e(y,C,p(B.scrollDefaultTime))}}}}if(A&&A.length){var z=C.scrollTop()+A.position().top-A.outerHeight();C.scrollTop(z)}else{C.scrollTop(0)}t(B);y.trigger("showTimepicker")},hide:function(y){h(".ui-timepicker-wrapper:visible").each(function(){var B=h(this);var z=B.data("timepicker-input");var A=z.data("timepicker-settings");if(A&&A.selectOnBlur){m(z)}B.hide();z.trigger("hideTimepicker")})},option:function(z,C){var y=this;var A=y.data("timepicker-settings");var B=y.data("timepicker-list");if(typeof z=="object"){A=h.extend(A,z)}else{if(typeof z=="string"&&typeof C!="undefined"){A[z]=C}else{if(typeof z=="string"){return A[z]}}}A=g(A);y.data("timepicker-settings",A);if(B){B.remove();y.data("timepicker-list",false)}return y},getSecondsFromMidnight:function(){return p(a(this))},getTime:function(){var z=this;var y=new Date();y.setHours(0,0,0,0);return new Date(y.valueOf()+(p(a(z))*1000))},setTime:function(z){var y=this;var A=w(p(z),y.data("timepicker-settings").timeFormat);d(y,A)},remove:function(){var y=this;if(!y.hasClass("ui-timepicker-input")){return}y.removeAttr("autocomplete","off");y.removeClass("ui-timepicker-input");y.removeData("timepicker-settings");y.off(".timepicker");if(y.data("timepicker-list")){y.data("timepicker-list").remove()}y.removeData("timepicker-list")}};function g(z){if(z.minTime){z.minTime=p(z.minTime)}if(z.maxTime){z.maxTime=p(z.maxTime)}if(z.durationTime){z.durationTime=p(z.durationTime)}if(z.disableTimeRanges.length>0){for(var y in z.disableTimeRanges){z.disableTimeRanges[y]=[p(z.disableTimeRanges[y][0]),p(z.disableTimeRanges[y][1])]}z.disableTimeRanges=z.disableTimeRanges.sort(function(B,A){return B[0]-A[0]})}return z}function j(L){var B=L.data("timepicker-settings");var I=L.data("timepicker-list");if(I&&I.length){I.remove();L.data("timepicker-list",false)}I=h("<ul />",{"class":"ui-timepicker-list"});var G=h("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});G.css({display:"none",position:"absolute"}).append(I);if(B.className){G.addClass(B.className)}if((B.minTime!==null||B.durationTime!==null)&&B.showDuration){G.addClass("ui-timepicker-with-duration")}var H=(B.durationTime!==null)?B.durationTime:B.minTime;var y=(B.minTime!==null)?B.minTime:0;var D=(B.maxTime!==null)?B.maxTime:(y+k-1);if(D<=y){D+=k}var A=B.disableTimeRanges;var F=0;var z=A.length;for(var E=y;E<=D;E+=B.step*60){var K=E%k;var M=h("<li />");M.data("time",K);M.text(w(K,B.timeFormat));if((B.minTime!==null||B.durationTime!==null)&&B.showDuration){var C=h("<span />");C.addClass("ui-timepicker-duration");C.text(" ("+b(E-H)+")");M.append(C)}if(F<z){if(K>=A[F][0]&&K<A[F][1]){M.addClass("ui-timepicker-disabled")}else{if(K>=A[F][1]){F+=1}}}I.append(M)}G.data("timepicker-input",L);L.data("timepicker-list",G);var J=B.appendTo;if(typeof J==="string"){J=h(J)}else{if(typeof J==="function"){J=J(L)}}J.append(G);r(L,I);I.on("click","li",function(N){L.off("focus.timepicker");L.on("focus.timepicker-ie-hack",function(){L.off("focus.timepicker-ie-hack");L.on("focus.timepicker",u.show)});L[0].focus();I.find("li").removeClass("ui-timepicker-selected");h(this).addClass("ui-timepicker-selected");if(m(L)){G.hide()}})}function c(){return new Date(1970,1,1,0,0,0)}function t(y){if("ontouchstart" in document){h("body").on("touchstart.ui-timepicker",o)}else{h("body").on("mousedown.ui-timepicker",o);if(y.closeOnWindowScroll){h(window).on("scroll.ui-timepicker",o)}}}function o(A){var z=h(A.target);var y=z.closest(".ui-timepicker-input");if(y.length===0&&z.closest(".ui-timepicker-wrapper").length===0){u.hide();h("body").unbind(".ui-timepicker");h(window).unbind(".ui-timepicker")}}function e(y,D,C){if(!C&&C!==0){return false}var A=y.data("timepicker-settings");var z=false;var B=A.step*30;D.find("li").each(function(E,G){var F=h(G);var H=F.data("time")-C;if(Math.abs(H)<B||H==B){z=F;return false}});return z}function r(z,C){C.find("li").removeClass("ui-timepicker-selected");var B=p(a(z));if(!B){return}var A=e(z,C,B);if(A){var y=A.offset().top-C.offset().top;if(y+A.outerHeight()>C.outerHeight()||y<0){C.scrollTop(C.scrollTop()+A.position().top-A.outerHeight())}A.addClass("ui-timepicker-selected")}}function f(){if(this.value===""){return}var y=h(this);var C=p(this.value);if(C===null){y.trigger("timeFormatError");return}var z=y.data("timepicker-settings");if(z.minTime!==null&&C<z.minTime){y.trigger("timeRangeError")}else{if(z.maxTime!==null&&C>z.maxTime){y.trigger("timeRangeError")}}h.each(z.disableTimeRanges,function(){if(C>=this[0]&&C<this[1]){y.trigger("timeRangeError");return false}});if(z.forceRoundTime){var B=C%(z.step*60);if(B>=z.step*30){C+=(z.step*60)-B}else{C-=B}}var A=w(C,z.timeFormat);d(y,A)}function a(y){if(y.is("input")){return y.val()}else{return y.data("ui-timepicker-value")}}function d(y,z){if(y.is("input")){y.val(z)}else{y.data("ui-timepicker-value",z)}}function i(B){var y=h(this);var A=y.data("timepicker-list");if(!A||!A.is(":visible")){if(B.keyCode==40){y.focus()}else{return l(B,y)}}switch(B.keyCode){case 13:if(m(y)){u.hide.apply(this)}B.preventDefault();return false;case 38:var z=A.find(".ui-timepicker-selected");if(!z.length){A.find("li").each(function(C,D){if(h(D).position().top>0){z=h(D);return false}});z.addClass("ui-timepicker-selected")}else{if(!z.is(":first-child")){z.removeClass("ui-timepicker-selected");z.prev().addClass("ui-timepicker-selected");if(z.prev().position().top<z.outerHeight()){A.scrollTop(A.scrollTop()-z.outerHeight())}}}return false;case 40:z=A.find(".ui-timepicker-selected");if(z.length===0){A.find("li").each(function(C,D){if(h(D).position().top>0){z=h(D);return false}});z.addClass("ui-timepicker-selected")}else{if(!z.is(":last-child")){z.removeClass("ui-timepicker-selected");z.next().addClass("ui-timepicker-selected");if(z.next().position().top+2*z.outerHeight()>A.outerHeight()){A.scrollTop(A.scrollTop()+z.outerHeight())}}}return false;case 27:A.find("li").removeClass("ui-timepicker-selected");A.hide();break;case 9:u.hide();break;default:return l(B,y)}}function l(z,y){return !y.data("timepicker-settings").disableTextInput||z.ctrlKey||z.altKey||z.metaKey||(z.keyCode!=2&&(z.keyCode<46||z.keyCode>90))}function x(A){var y=h(this);var z=y.data("timepicker-list");if(!z||!z.is(":visible")){return true}switch(A.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:r(y,z);break;default:return}}function m(y){var B=y.data("timepicker-settings");var C=y.data("timepicker-list");var A=null;var D=C.find(".ui-timepicker-selected");if(D.hasClass("ui-timepicker-disabled")){return false}if(D.length){A=D.data("time")}else{if(a(y)){A=p(a(y));r(y,C)}}if(A!==null){var z=w(A,B.timeFormat);d(y,z)}y.trigger("change").trigger("changeTime");return true}function b(B){var z=Math.round(B/60);var A;if(Math.abs(z)<60){A=[z,q.mins]}else{if(z==60){A=["1",q.hr]}else{var y=(z/60).toFixed(1);if(q.decimal!="."){y=y.replace(".",q.decimal)}A=[y,q.hrs]}}return A.join(" ")}function w(F,E){if(F===null){return}var D=new Date(n.valueOf()+(F*1000));var z="";var y,C;for(var B=0;B<E.length;B++){C=E.charAt(B);switch(C){case"a":z+=(D.getHours()>11)?"pm":"am";break;case"A":z+=(D.getHours()>11)?"PM":"AM";break;case"g":y=D.getHours()%12;z+=(y===0)?"12":y;break;case"G":z+=D.getHours();break;case"h":y=D.getHours()%12;if(y!==0&&y<10){y="0"+y}z+=(y===0)?"12":y;break;case"H":y=D.getHours();z+=(y>9)?y:"0"+y;break;case"i":var A=D.getMinutes();z+=(A>9)?A:"0"+A;break;case"s":F=D.getSeconds();z+=(F>9)?F:"0"+F;break;default:z+=C}}return z}function p(B){if(B===""){return null}if(!B||B+0==B){return B}if(typeof(B)=="object"){B=B.getHours()+":"+v(B.getMinutes())+":"+v(B.getSeconds())}B=B.toLowerCase();var E=new Date(0);var C;if(B.indexOf(":")===-1){C=B.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/);if(!C){C=B.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/)}}else{C=B.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/)}if(!C){return null}var z=parseInt(C[1]*1,10);var y;if(C[4]){if(z==12){y=(C[4]=="p")?12:0}else{y=(z+(C[4]=="p"?12:0))}}else{y=z}var A=(C[2]*1||0);var D=(C[3]*1||0);return y*3600+A*60+D}function v(y){return("0"+y).slice(-2)}h.fn.timepicker=function(y){if(u[y]){return u[y].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof y==="object"||!y){return u.init.apply(this,arguments)}else{h.error("Method "+y+" does not exist on jQuery.timepicker")}}}}));